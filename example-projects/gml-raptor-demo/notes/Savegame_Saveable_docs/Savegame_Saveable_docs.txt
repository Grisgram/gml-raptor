Saveable
========

The Saveable object is a base object, containing function prototypes you may override (redefine),
and also two user events that get invoked before data is written on save and after it has been loaded.
It acts as a base class for all objects that shall be contained in a save game.
In the Tools folder you find a script named Savegame. This script contains functions that iterate
over all "Saveable" objects and create a json structure of them.

-------------------------------------------------------------------------------------------------------------
NOTE: Saving Saveable objects to a file can always iterate only over the current room and persistent objects!
-------------------------------------------------------------------------------------------------------------

	By default, all saveable objects will be part of the savegame file.
	Use the declared instance variable add_to_savegame and set it to false
	if you want to skip specific instances from being saved.
	
	The base platform defines these objects as children of Saveable:
	- LGTextObject
	- StatefulObject -> RaceObject
	- RaceTable
	- RaceController

	ALL RACE TABLES known at the time of saving the game will be part of
	the savegame.
	
	Engine data saved:
	"seed"				The current seed of the randomizer.
	
	For each object instance, that has [Saveable] as parent in the inheritance
	chain, these properties will automatically be saved in and restored from the
	savegame:
	
	INSTANCE FIELDS
	"obj", "id"							The object type and id (for restore reference)
	"x", "y"							The current position
	"direction", "speed"				The direction and speed
	"layer", "depth"					The name of the layer (if available) and/or depth where it exists
	
	OBJECT FIELDS
	"visible", "persistent", "solid"	Object flags
	
	SPRITE/IMAGE FIELDS
	"sprite_index", "image_index"		Sprite and frame number
	"image_speed"						Sprite animation speed
	"image_alpha", "image_blend"		Transparency and color blend
	"image_angle", "image_xscale",
	"image_yscale"						Rotation and scaling
	
	IN ADDITION: All instance variables of indie platform objects (like the Race...
	objects) will automatically save their states and even restore their instance
	links (like the RaceController variable on a RaceTable object)!
	You do not need to save "race_table_name" and other race variables manually.
	
	NOTE: The user event 14 (onGameSaving) will be invoked before the contents of
	the data variable (or whatever onGameSaving returns, if you override it)
	are written to the savegame file.
	The function onGameSaving below will be called by the savegame
	scripts when the game gets saved. Override this event and (re)declare that
	function and return any struct you like. It will be part of the savegame!
	Use it to store more important data than the default properties saved by
	the savegame script.
	
	NOTE: If you create a instance variable called "data", it will be automatically
	saved and loaded, as long as it's a struct.
	
	The same is true for the onGameLoaded function and user event 15 (onGameLoaded). 
	It receives the exact struct you returned from onGameSaving.
	
	In addition, there is a post-save function onGameSaved which gets invoked after
	ALL data has been written to the file and an onGameLoading function which will
	by default assign the struct from the savegame to the data variable.
	Override an re-declare this function if you need another behavior.
	
	The callback/event order is:
	| Saving							|	Loading									|
	|-------------------------------------------------------------------------------|
	| SAVEGAME_SAVE_IN_PROGRESS = true	|	SAVEGAME_LOAD_IN_PROGRESS = true		|
	| onGameSaving (user event)			|	onGameLoading (function)				|
	| onGameSaving (function)			|	SAVEGAME_LOAD_IN_PROGRESS = false		|
	| SAVEGAME_SAVE_IN_PROGRESS = false	|	onGameLoaded  (function)				|
	| onGameSaved  (function)			|	onGameLoaded  (user event)				|
	|-------------------------------------------------------------------------------|
	
	NOTE: The "...ing" (savING, loadING) functions and events are invoked
	on a per-object basis during the save process!
	The "...ed" (savED, loadED) are bulk-invoked on all objects AFTER
	ALL DATA has been saved/loaded.

